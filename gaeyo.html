<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>home</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: url('repo.png') no-repeat center center/cover;
      position: relative;
      overflow: hidden;
      font-family: 'Arial Black', sans-serif;
      color: white;
    }

    /* 어두운 블러 + 필름그레인 */
    body::before {
      content: "";
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.55);
      backdrop-filter: blur(3px);
      z-index: 1;
    }
    body::after {
      content: "";
      position: absolute;
      inset: 0;
      background: url('grain.png');
      opacity: 0.2;
      mix-blend-mode: overlay;
      z-index: 2;
      pointer-events: none;
    }

    /* 로고 */
    .logo {
      position: absolute;
      top: -320px;
      left: 130px;
      font-size: 90px;
      font-weight: bold;
      letter-spacing: .5em;
      z-index: 3;
      background: linear-gradient(to bottom, #d77d1d 40%, #e0e0e0 60%);
      -webkit-background-clip: text; /* WebKit 브라우저용 */
      background-clip: text;         /* 표준 속성 추가 */
      -webkit-text-fill-color: transparent;
      color: transparent;            /* 표준 속성 대체 */
      text-transform: uppercase;
      position: relative;
    }

    .logo::after {
      content: "";
      position: absolute;
      inset: 0;
      background: url('rust_texture.png');
      mix-blend-mode: multiply;
      opacity: 0.7;
      -webkit-background-clip: text;
      background-clip: text;         /* 표준 속성 추가 */
      -webkit-text-fill-color: transparent;
      color: transparent;            /* 표준 속성 대체 */
    }

    .dot {
      color: #f2a10f;
      -webkit-text-fill-color: #f2a10f;
      background: none;
    }

    /* 메뉴 */
    .menu {
      position: absolute;
      top: 300px;
      left: 100px;
      z-index: 3;
      padding: 0;
    }
    .menu li {
      list-style: none;
      margin: 25px 0;
    }
    .menu li a {
      color: white;
      text-decoration: none;
      font-size: 28px;
      display: block;
      text-shadow: 0 0 6px rgba(255,255,255,0.6);
      transition: transform 0.2s ease, color 0.2s ease;
    }
    .menu li a:hover {
      color: #f2a10f;
      transform: scale(1.05);
    }

    /* 자연스러운 지직 효과 canvas */
    #tvNoise {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: none;
      z-index: 50;
      pointer-events: none;
      opacity: 0.15;
    }
  </style>
</head>
<body>
  <div class="logo">R<span class="dot">.</span>E<span class="dot">.</span>P<span class="dot">.</span>O</div>

  <ul class="menu">
    <li><a href="#">HOST GAME</a></li>
    <li><a href="#">JOIN GAME</a></li>
    <li><a href="#">SINGLEPLAYER</a></li>
    <li><a href="/time" class="tv-link">TIME</a></li>
    <li><a href="#">SETTINGS</a></li>
    <li><a href="#">QUIT GAME</a></li>
  </ul>

  <canvas id="tvNoise"></canvas>

  <script>
    const canvas = document.getElementById('tvNoise');
    const ctx = canvas.getContext('2d');
    let animationFrame;

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    function tvNoiseEffect(duration = 500) {
      canvas.style.display = 'block';
      const startTime = performance.now();

      function draw() {
        const now = performance.now();
        const elapsed = now - startTime;
        if (elapsed > duration) {
          canvas.style.display = 'none';
          cancelAnimationFrame(animationFrame);
          return;
        }

        const imageData = ctx.createImageData(canvas.width, canvas.height);
        const buffer = imageData.data;

        // 랜덤하게 픽셀 크기 변화
        const pixelSize = Math.floor(Math.random() * 4) + 2; // 2~5px
        for (let y = 0; y < canvas.height; y += pixelSize) {
          for (let x = 0; x < canvas.width; x += pixelSize) {
            const val = Math.random() * 255;
            for (let py = 0; py < pixelSize; py++) {
              for (let px = 0; px < pixelSize; px++) {
                const i = 4 * ((y+py) * canvas.width + (x+px));
                if (i < buffer.length) {
                  buffer[i] = val * 0.9 + 50;
                  buffer[i+1] = val * 0.8 + 40;
                  buffer[i+2] = val * 0.85 + 45;
                  buffer[i+3] = 255;
                }
              }
            }
          }
        }

        ctx.putImageData(imageData, 0, 0);
        animationFrame = requestAnimationFrame(draw);
      }

      draw();
    }

    const links = document.querySelectorAll('.tv-link');
    links.forEach(link => {
      link.addEventListener('click', function(e){
        e.preventDefault();
        const href = this.getAttribute('href');
        tvNoiseEffect(400);
        setTimeout(() => {
          window.location.href = href;
        }, 600);
      });
    });
  </script>
</body>
</html>
